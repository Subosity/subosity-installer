[Unit]
Description=Subosity Application Stack
Documentation=https://github.com/subosity/subosity-installer
After=docker.service
Requires=docker.service
StartLimitIntervalSec=0

[Service]
Type=simple
WorkingDirectory={{.InstallPath}}
ExecStartPre=-/usr/bin/docker compose down
ExecStart=/usr/bin/docker compose up
ExecReload=/usr/bin/docker compose restart
ExecStop=/usr/bin/docker compose down
Restart=always
RestartSec=5
StandardOutput=journal
StandardError=journal
SyslogIdentifier=subosity

# Security settings
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ReadWritePaths={{.InstallPath}}

[Install]
WantedBy=multi-user.target
